author,updated_at,like_count,text,public
@roylee8940,2020-11-25T03:13:20Z,0,"I try a quite dummies way to do it. But it looks work.  hope can help someone :)    def yahooKeyStats(stock):   try:     sourceCode = urllib.request.urlopen('https://finance.yahoo.com/quote/'+stock+'/key-statistics?p='+stock).read()     SourceCode= str(sourceCode)     start = 'Market Cap is calculated using shares outstanding."" data-reactid=""84"">5</sup><div class=""W(3px) Pos(a) Start(100%) T(0) H(100%) Bg($pfColumnFakeShadowGradient) Pe(n) Pend(5px)"" data-reactid=""85""></div></td><td class=""Ta(c) Pstart(10px) Miw(60px) Miw(80px)--pnclg Bgc($lv1BgColor) fi-row:h_Bgc($hoverBgColor)"" data-reactid=""86"">'     end = '</td><td class=""Ta(c) Pstart(10px) Miw(60px) Miw(80px)--pnclg fi-row:h_Bgc($hoverBgColor)'     s = SourceCode     print('market capitalization:',(s.split(start))[1].split(end)[0])             except Exception:     print('failed in the main loop')",True
@Hibernatus50,2020-04-19T15:16:47Z,0,"Hi,  Trying to do this 6 years after you published it, so urllib2 does not work anymore, went to urllib3. Also, Yahoo changed the layout of it webpage and it's a nightmare now. When I look for the ""Price/Book"", the research does not find it, even though it still exists on the web page. On jupyter notebook when I print the result of the source code, there is a lot less than on the actual page. I don't really understand what's happening. Do you have an updated way to do this with python 3 and new Yahoo please ? Would be much appreciated.",True
@denverstrong473,2019-08-19T18:15:04Z,0,"Some of the comments on here wouldn't work for me. I found that super-splitting is helpful. Doing quick trials it worked on MCD, TSLA, INPX, AAPL, APLE.   import urllib.request  def pull_Yahoo(stock):     url = 'https://finance.yahoo.com/quote/'+stock+'/key-statistics?p='+stock     sourceCode = urllib.request.urlopen(url).read()     pbr = str(sourceCode).split('(mrq)')[1]     pbr = pbr.split('class')[1]     pbr = pbr.split('Miw(60px)')[1]     try:         pbr = pbr.split('span data')[1]         pbr = pbr.split('>')[1]         pbr = pbr.split('<')[0]     except:         pbr = pbr.split('>')[1]         pbr = pbr.split('<')[0]     print(""Price/Book Ratio: "", pbr)     return pbr",True
@gerauschearchiv5547,2018-11-08T17:03:44Z,3,"with Python 3 and updated Yahoo Website the Code looks like this:  import time import urllib.request from urllib.request import urlopen  stock = ['a', 'aa', 'aapl', 'abbv', 'abc', 'abt', 'ace', 'aci', 'acn', 'act', 'adbe', 'adi', 'adm', 'adp']  def yahooKeyStats(stock):      try:         sourceCode = urllib.request.urlopen('http://finance.yahoo.com/q/ks?s='+stock).read()         pbr = str(sourceCode).split('Price/Book</span><!-- react-text: 58 --> <!-- /react-text --><!-- react-text: 59 -->(mrq)<!-- /react-text --><sup aria-label=""KS_HELP_SUP_undefined"" data-reactid=""60""></sup></td><td class=""Fz(s) Fw(500) Ta(end)"" data-reactid=""61"">')[1].split(""</td>"")[0]         print ('price to book ratio', pbr)                      except:         print ('failed in the main loop', str(e))  yahooKeyStats(""aapl"")",True
@madhusudhan237,2018-10-12T21:06:36Z,0,"HI, could you please help me with this error. i wrote the below code as displayed in this video, but for different exchange --------------------------------------- import time import urllib2 from urllib2 import urlopen   nifty50 = ['ADANIPORTS’,’ASIANPAINT’, ’AXISBANK’, ’BAJAJ-AUTO’, ’BAJFINANCE’, ’BAJAJFINSV’, ’BPCL’, ’BHARTIARTL’, ’INFRATEL’, ’CIPLA’, ’COALINDIA’, ’DRREDDY’, ’EICHERMOT’, ’GAIL’, ’GRASIM’, ’HCLTECH’, ’HDFCBANK, ’HEROMOTOCO’, ’HINDPETRO’, ’HINDUNILVR’, ’HDFC’, ’ITC’, ’ICICIBANK’, ’IBULHSGFIN’, ’IOC’, ’INDUSINDBK’, ’INFY’, ’JSWSTEEL’, ’KOTAKBANK’, ’LT’, ’M&M’, ’MARUTI’, ’NTPC’, ’ONGC’, ’POWERGRID’, ’RELIANCE’, ’SBIN’, ’SUNPHARMA’, ’TCS’, ’TATAMOTORS’, ’TATASTEEL’, ’TECHM’, ’TITAN’, ’UPL’, ’ULTRACEMCO’, ’VEDL’, ’WIPRO’, ’YESBANK’, ’ZEEL']  def yahookeystats(stock):     try:         sourcecode = urllib2.urlopen('https://in.finance.yahoo.com/quote/'+stock+'.NS'+'/key-statistics?p='+stock+'.NS&.tsrc=fin-srch-v1').read()         pbr = sourcecode.split ('Price/book</span><!-- react-text: 58 --> <!-- /react-text --><!-- react-text: 59 -->(mrq)<!-- /react-text --><sup aria-label=""KS_HELP_SUP_undefined"" data-reactid=""60""></sup></td><td class=""Fz(s) Fw(500) Ta(end)"" data-reactid=""61"">')[1].split('</td>')[0]         print 'price to book ratio:', pbr              except Exception,e:         print 'failed in the main loop',str(e)  ------------------------------------------ when i execute, i get the following error, when i search for a stock named 'Relaince'  >>> yahoostats('RELIANCE')  Traceback (most recent call last):   File ""<pyshell#11>"", line 1, in <module>     yahoostats('RELIANCE') NameError: name 'yahoostats' is not defined",True
@Shawnathonification,2018-05-31T22:55:24Z,0,"Here's my python3 version. It seems to work alright. Sometimes it fails, but if I try again it'll work. I suspect it's just something about me not understanding how website stuff works. With the symbols I've tried I've found those two different search_str's (the only difference between them being 58, 59 60, 61 or 60, 61, 62, 63. No guarantee this will always work though!   import time import urllib   search_strs = [""Price/Book</span><!-- react-text: 58 --> <!-- /react-text"" \                "" --><!-- react-text: 59 -->(mrq)<!-- /react-text --><sup "" \                ""aria-label=\""KS_HELP_SUP_undefined\"" data-reactid=\""60\"">"" \                ""</sup></td><td class=\""Fz(s) Fw(500) Ta(end)\"" data-react"" \                ""id=\""61\"">"",                ""Price/Book</span><!-- react-text: 60 --> <!-- /react-text"" \                "" --><!-- react-text: 61 -->(mrq)<!-- /react-text --><sup "" \                ""aria-label=\""KS_HELP_SUP_undefined\"" data-reactid=\""62\"">"" \                ""</sup></td><td class=\""Fz(s) Fw(500) Ta(end)\"" data-react"" \                ""id=\""63\"">""]  def yahooKeyStats(stock):     try:         sourceCode = urllib.request.urlopen('http://finance.yahoo.com/q/ks?s='+stock).read()         try:             search_str = search_strs[0]             pbr = sourceCode.decode().split(search_str)[1].split(""</td>"")[0]         except:             try:                 search_str = search_strs[1]                 pbr = sourceCode.decode().split(search_str)[1].split(""</td>"")[0]             except:                 print(""Error: Can't find search string."")          #pbr = sourceCode.decode().split(search_str)[1].split(""</td>"")[0]         print(""Price/Book Ratio: {}"".format(pbr))     except:         print(""Error: Can't get Price/Book Ratio."")",True
@herbertvaughn5738,2018-02-17T03:25:11Z,0,"Hi I'm currently using Python3.5.6 and I can't call a python file from the interactive ide with ""print(filename) command. Each time I do error message saying ""NameError: name_filename is not defined. I can call it from windows shell, cmdline terminal, gitbash by changing to the directory where the file is and use print(file_name) command. help???",True
@20775046,2018-01-03T21:26:22Z,0,"Hey it doesn't give me the P/B for the stock that I type in. It just gives me the data for AMZN, but there is no way to delete ""AMZN' and make it function. Here's whats my sourceCode looks like: sourceCode=urllib2.urlopen ('https://ca.finance.yahoo.com/quote/AMZN/key-statistics?p='+stock).read()  Am I suppose to delete AMZN and type in stock??? or??  I don't know what to do, your URL is much different than mine.  Thanks",True
@TheMusabbirmazhar,2016-12-25T19:09:34Z,0,hi the S&P 500 (long list ) is not there- just trying out python from your tutorial - good job ! :),True
@porlando12,2016-12-23T05:41:43Z,1,"Great video! Would youu be able to update your script to work with Yahoo Finance's newer source code? There are differences in the urls and the key statistics  (numerics) are not visible in the source code anymore. Thanks, and keep up the great content!",True
@furrheul1989,2016-11-07T07:23:31Z,1,"Hi everyone, apparently my message didn't get trough last night, so if this becomes a double post that will be why. But anyway, there is a yahoo finance module in Python which you can use now that Yahoo changed it website (https://pypi.python.org/pypi/yahoo-finance/1.3.2). Should make life a lot more easy.",True
@ssrrapper,2016-09-07T00:12:20Z,5,"Unfortunately, it looks like this tutorial will need to be re-done.  Yahoo Finance has completely changed their site.  The URL for each stock's key statistics page is now different and the source code is all different (looks like a different code [maybe JavaScript?] has replaced a lot of the HTML).   Plus, now a lot of people are using Python 3.  :)",True
@ngqondo5254,2016-08-31T15:27:32Z,3,When I open the yahoo source code I cant find the Price \book html code. Help Please,True
@DanielOliveira-pw9wk,2016-07-25T10:06:03Z,5,Hello! First of all thank you for uploading such amazing videos. I'm learning a lot about python on your channel. I'm a R user but i'm seriously thinking about moving to python :)  My problem is: Yahoo finance changed it's website. The information on the key statistics are no longer on the source code of the webpage. Do you know how can we solve this and extract the information for our programs?  Thanks again!,True
@hhhez,2016-06-26T03:32:06Z,1,"Besides Yahoo, what are some other ways or websites to get the data since we know Yahoo is not doing well today...",True
@briantaylor8780,2016-06-07T13:34:04Z,0,"First, I love your channel, thank you for posting such amazing tutorials! I have been able to learn so much! My question: I applied this technique to the Analyst EPS Estimates, it worked flawlessly until it came across a negative estimate. Yahoo changes the color of the estimate to red when it is negative, so the HTML font tag appears along with the estimate. Any idea how to account for this possibility?",True
@fantanasports8552,2016-05-06T20:33:09Z,0,"How do gather the data if the website's source code doesn't even have the actual information... At least that I can see.   I am trying to take the names of all the nba player off of http://stats.nba.com/players/  But when I look at the source code, what appears on the compiled HTML page does not show up in the source code??",True
@vamsipadarthi1226,2016-01-31T11:39:15Z,0,"Hi Sentdex,  I am getting an error in executing code while ccalculating pbr.  It is showing the following error:  a bytes-like object is required, not 'str'.  I am using Python 3.5.1.  What should I do to correct it?  Thanks in advance",True
@KaleGood,2016-01-27T04:11:36Z,1,Why not use yahoo finance csv API and avoid parsing the html altogether? http://www.jarloo.com/yahoo_finance/,True
@Coocoocards,2016-01-22T21:13:24Z,0,"i keep getting an error message saying ""missing parentheses in call to 'print'. I've even copy and pasted the code given at pythonprogramming.net and continue to get the same error. I'm using python 3.5.1",True
@skmistreci,2015-10-24T13:13:22Z,0,"Thanks a lot for putting this video in YouTube.  I created the function by following your video and listed only two sample stocks instead of the entire list. What should I fix so my function gets recognized by python?  I'm encountering an error in Python 2.7.10 but can't figure it out.  NameError: name  Traceback (most recent call last):   File ""<pyshell#0>"", line 1, in <module>     yahooKeyStats('aapl') NameError: name 'yahooKeyStats' is not defined    import time import urllib2 from urllib2 import urlopen  sp500 = ['aapl','m'] sp500short = ['aapl','m']  def yahooKeyStats(stock):     try:         sourceCode = urllib2.urlopen('http://finance.yahoo.com/q/ks?s='+stock).read()         pbr = sourceCode.split('Price/Book (mrq):</td><td class=""yfnc_tabledata1"">'[1].split('</td>')[0]         print 'price to book ratio:', pbr                                     except Exception,e:         print 'failed in the main loop', str(e)",True
@tomceulemans333,2015-05-13T14:56:18Z,0,"Hi there!  First of all, a big thank you for uploading those. So far, those uploads/videos seem to be exactly what I have been looking for for a long time.  I tried using py 2.7, not version 3 yet due to the changes and as an amateur I'd like to copy and understand what you do in the video. Now I copied everything BUT the pbr.sourcecode line. I opened the HTML myself and saw that what you wrote is not the same as what the HTML does, so I changed that part.  The code looks like this: import time import urllib2 from urllib2 import urlopen    def yahooKeyStats(stock):     try:         sourceCode = urllib2.urlopen ('http://finance.yahoo.com/q/ks?s='+stock).read()         pbr = sourceCode.split('<td class=""yfnc_tabledata1"" id=""yui_3_9_1_9_1431516240044_38"">')[1].split('</td>')[0]         print'price to book ratio:',pbr              except Exception,e:         print 'failed in the main loop',str(e)  This is exactly like yours, except this part: ""pbr = sourceCode.split('<td class=""yfnc_tabledata1"" id=""yui_3_9_1_9_1431516240044_38"">')[1].split('</td>')[0]"", but also with your basis.  Whenever I try to run the program, I get the error ""failed in the main loop list index out of range"", and I have no clue where it is coming from.  Could you help me? I am honestly lost at what to do and I don't want to continue further videos before I understand where I go wrong here!  Thank you in advance!   EDIT: typo EDIT 2: PROBLEM SOLVED: for anyone else making the same mistake as I did: go to source-finance:yahoo... and do not use the ""Developer"" tool in google chrome drop down menu. :)",True
@waltsworld88,2015-04-21T15:21:40Z,0,Thanks for the videos they're awesome. Is there a way to parse price date so that it will tell me when a new 20 day high is hit? Thanks again.,True
@Antoine_Collignon,2015-01-17T02:06:51Z,1,"Hey, I just wanted to tell you I love your video. Currently really noob at python but learning with you seems so much easy. I understand lots of concept I didn't get just by reading some tutorial on internet.  Thank you <3",True
@mrbighit,2014-11-14T01:38:26Z,11,python3: import urllib.request sourceCode = urllib.request.urlopen pbr = str(sourceCode).split except Exception as e,True
@mrbighit,2014-11-14T00:18:05Z,1,"Could you add the list of companies that you've put in a list? Or upload a raw code?.  Would also appreciate the code in python3, i know urllib2 is now urllib.request , and I'm getting some buffer API error trying this script.",True
@sentdex,2014-06-12T23:14:42Z,1,"Robert Zeas I still do a lot of tutorials in both py 2.7 and py 3+. It's probably better if you learn the differences since a lot of tutorials are still in 2.7, yet applicable to any version. I probably could put out a tutorial video on the differences and porting over versions, but, for now, exceptions are slightly different. We do Except exception, e.... python 3+ does: Except exception as e:",True
@RobertZeas,2014-06-12T21:01:27Z,1,"Hi, love the tutorial. Installed Python 3.4.1- and noticing a few of the syntax and command rules are different vs. what's posted in your video 8 month's ago.  Any chance we could get an update?  I've taken this successfully all the way down to the except Exception, e: line ! :-)",True
@jackcho7229,2013-11-25T05:16:19Z,0,"Hi, thanks for these video. Quick question, is there a particular reason why you decide to screen scrap yahoo data rather than using their api to download the csv?",True
